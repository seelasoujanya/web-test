<div class="workflow-history-container">
  <button
    class="btn btn--red"
    type="button"
    (click)="filterDeliveries(filterDeliveriesForm)">
    Filter
  </button>
  <div class="workflows-instance-table">
    <app-workflow-table
      *ngIf="!noInstancesFound"
      [workflows]="workflowsInstances"
      [headings]="instanceHeadings"
      [isWorkflow]="false"
      (getSortParam)="sortColumn($event)"
      (workflowDetailEvent)="viewInstanceDetails($event)"></app-workflow-table>
    <div *ngIf="noInstancesFound" class="no-instances-message">
      No Instance Found
    </div>

    <div class="page-view" *ngIf="!noInstancesFound">
      <app-pagination
        [page]="page"
        (paginationEvent)="onPage($event)"></app-pagination>
    </div>
  </div>
</div>

<ng-template #filterDeliveriesForm class="modal-content">
  <div class="header">
    <p class="header_title">Filter</p>
    <button type="button" class="header_close-btn" (click)="closeModal()">
      <img src="assets/icons/close-circle.svg" alt="" />
    </button>
  </div>
  <div class="form-details">
    <div class="field">
      <span>Start Date</span>
      <mat-form-field
        appearance="outline"
        color="accent"
        class="w-100 datepicker__size_s">
        <mat-label>DD MMM, YYYY</mat-label>
        <input
          matInput
          [matDatepicker]="startDatepicker"
          [(ngModel)]="filter.startDate"
          placeholder="Select Start Date"
          readonly />
        <mat-datepicker-toggle
          matSuffix
          [for]="startDatepicker"></mat-datepicker-toggle>
        <mat-datepicker #startDatepicker></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="field">
      <span>Completed Date</span>
      <mat-form-field
        appearance="outline"
        color="accent"
        class="w-100 datepicker__size_s">
        <mat-label>DD MMM, YYYY</mat-label>
        <input
          matInput
          [matDatepicker]="completedDatepicker"
          [(ngModel)]="filter.completedDate"
          placeholder="Select Completed Date"
          readonly />
        <mat-datepicker-toggle
          matSuffix
          [for]="completedDatepicker"></mat-datepicker-toggle>
        <mat-datepicker #completedDatepicker></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- <div class="field">
            <span>Duration</span>
            <div class="duration-slider">
                <mat-slider min="0" max="60" step="1" thumbLabel tickInterval="5" [(ngModel)]="durationValue" (change)="onDurationChange($event)">
                </mat-slider>
                <span>{{ formattedDuration }}</span>
            </div>
        </div> -->

    <div class="field">
      <span>Duration</span>
      <div class="duration-slider">
        <input
          type="range"
          min="0"
          max="60"
          step="1"
          [(ngModel)]="filter.duration" />
      </div>
    </div>

    <div class="field">
      <span>Status</span>
      <ng-select
        [items]="workflowInstanceStatus"
        bindLabel="label"
        bindValue="value"
        [searchable]="false"
        [clearable]="false"
        placeholder="select status"
        [(ngModel)]="filter.status">
        <ng-template ng-label-tmp let-item="item">
          <span>{{ item.label }}</span>
          <svg
            width="14"
            height="8"
            viewBox="0 0 14 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.375 1.125L7 6.75L12.625 1.125"
              stroke="#262626"
              stroke-width="1.25"
              stroke-miterlimit="10"
              stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </ng-template>
      </ng-select>
    </div>

    <div class="field">
      <span>Priority</span>
      <ng-select
        [items]="prority"
        bindLabel="label"
        bindValue="value"
        [searchable]="false"
        [clearable]="false"
        placeholder="select status"
        [(ngModel)]="filter.priority">
        <ng-template ng-label-tmp let-item="item">
          <span>{{ item.label }}</span>
          <svg
            width="14"
            height="8"
            viewBox="0 0 14 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.375 1.125L7 6.75L12.625 1.125"
              stroke="#262626"
              stroke-width="1.25"
              stroke-miterlimit="10"
              stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </ng-template>
      </ng-select>
    </div>

    <div class="field">
      <span>Delivery Type</span>
      <ng-select
        [items]="deliveryType"
        bindLabel="label"
        bindValue="value"
        [searchable]="false"
        [clearable]="false"
        placeholder="select status"
        [(ngModel)]="filter.deliveryType">
        <ng-template ng-label-tmp let-item="item">
          <span>{{ item.label }}</span>
          <svg
            width="14"
            height="8"
            viewBox="0 0 14 8"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1.375 1.125L7 6.75L12.625 1.125"
              stroke="#262626"
              stroke-width="1.25"
              stroke-miterlimit="10"
              stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </ng-template>
      </ng-select>
    </div>
  </div>

  <div class="buttons" style="position: relative">
    <button class="btn btn--black">RESET ALL</button>
    <div class="tooltip-wrapper">
      <button class="btn btn--red" (click)="applyFilters()">
        APPLY FILTER
      </button>
    </div>
  </div>
</ng-template>
